const apiURL="https://rest.coinapi.io";function getBTCCurrentPrice(){return fetch("https://blockchain.info/tobtc?currency=EUR&value=1",{method:"GET"}).then((e=>e.text())).then((e=>1/e))}function getPrice(e){e.setDate(e.getDate()-1);const t=e.getFullYear();let n=e.getMonth()+1,c=e.getDate();n<=9&&(n="0"+n),c<=9&&(c="0"+c);return fetch(apiURL+`/v1/exchangerate/BTC/EUR?time=${t}${n}${c}`,{method:"GET",headers:{"X-CoinAPI-Key":"33FB9E6F-E14B-49DE-8B2C-17CDCA3E5DAA",Accept:"application/json"}}).then((e=>e.json())).then((e=>e.rate))}!async function(){const e=document.querySelector("#year-picker");for(let t=2011;t<=(new Date).getFullYear();t++){const n=document.createElement("option");n.text=t,n.value=t,e.add(n)}e.options[e.options.length-1].selected=!0;const t=document.querySelector("#pl-result"),n=document.querySelector("#wanna-cry"),c=document.getElementsByName("euros-invested")[0];e.addEventListener("change",(()=>{i()})),c.addEventListener("change",(()=>{i()}));const r=document.querySelector("#error-display"),i=()=>{r.style.visibility="hidden",t.textContent="..."};try{const i=await getBTCCurrentPrice();n.addEventListener("click",(async n=>{try{const n=new Date;n.setFullYear(+e.value);const r=await getPrice(n),a=(+c.value/r*i).toFixed(2);var o=new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",currencyDisplay:"code"});t.textContent=o.format(a)}catch(e){r.style.visibility="visible"}}))}catch(e){r.style.visibility="visible"}}();