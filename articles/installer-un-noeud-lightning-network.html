<!DOCTYPE HTML><html lang="fr" prefix="og: http://ogp.me/ns#"><head><title>Installer un nœud Lightning Network</title><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="theme-color" content="#0070FC"/><meta name="author" content="Jonathan Serra"/><meta property="og:url" content="https://blocs.fr"/><meta property="og:title" content="Installer un nœud Lightning Network"/><meta property="og:description" content="Envoyer des microtransactions bitcoin n&#x27;était pas possible jusqu&#x27;à l&#x27;arrivée de la technologie Lightning Network. C&#x27;est un système qui permet de faire des transactions quasi-instantannées et avec peu de frais."/><meta name="description" content="Envoyer des microtransactions bitcoin n&#x27;était pas possible jusqu&#x27;à l&#x27;arrivée de la technologie Lightning Network. C&#x27;est un système qui permet de faire des transactions quasi-instantannées et avec peu de frais."/><meta name="keywords" content="debian,bitcoind,bitcoin-cli"/><meta property="og:image" content="/res/7a9a4a84.jpg"/><meta property="og:image:alt" content="Installer un noeud Bitcoin-Comment fonctionne bitcoin-Installer Bitcoin"/><meta property="og:type" content="blog"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@_blocs"/><meta name="twitter:creator" content="@_blocs"/><meta property="article:author" content="Jonathan Serra"/><script defer="">const storageKey="blocs-data-theme";document.addEventListener("DOMContentLoaded",(function(){const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;let t=window.localStorage.getItem(storageKey);t||(t=e?"dark":"light");const a=document.querySelector("#theme-switch");a&&(activateTheme(t,a),a.addEventListener("click",(()=>{switch(t){case"dark":t="light";break;default:t="dark"}window.localStorage.setItem(storageKey,t),activateTheme(t,a)})))}));const activateTheme=(e,t)=>{const a=t.childNodes[0],c=t.childNodes[1];switch(e){case"light":c.style.display="block",a.style.display="none";break;case"dark":default:c.style.display="none",a.style.display="block"}document.documentElement.setAttribute("data-theme",e)};</script><script src="/res/1699ad49.js" defer=""></script><style>@keyframes ripple{to{transform:scale(4);opacity:0}}@font-face{font-family:Inter;font-weight:100 900;font-display:swap;font-style:normal;font-named-instance:"Regular";src:url(/res/541fae2e.woff2);font-display:fallback}@font-face{font-family:Inter;font-weight:100 900;font-display:swap;font-style:italic;font-named-instance:"Regular";src:url(/res/1517082.woff2);font-display:fallback}@font-face{font-family:'icons';font-display:swap;src:url(/res/31819284.woff2);font-weight:400;font-style:normal;font-display:fallback}.a:before,[class*=" icon-"]:before,[class^=icon-]:before{font-family:"icons";font-style:normal;font-weight:400;speak:never;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,::after,::before{box-sizing:border-box}*{font-weight:var(--b)}@supports (font-variation-settings:"wght" 400){*{font-weight:inherit;font-variation-settings:"wght" var(--b)}}:root{--a:#0070FC;--c:#FBE016;--d:#9e9e9e;--e:white;--f:black;--g:#000F26;--h:#eee;--i:12px;--j:12px}::selection{background-color:var(--a);color:#fff}[data-theme=light]{--e:#111;--c:#E3078F;--d:#667;--f:#fafafa;--g:#fcfcfe;--h:#333}body{margin:var(--i) var(--j) 64px;font:18px/26px Inter,system-ui,-apple-system,sans-serif;color:var(--e);background:var(--g);line-height:28px;max-width:100%;overflow-x:hidden}a{text-decoration:none;color:var(--a)}.A .C>div a:hover,a:active,a:hover{text-decoration:underline}.b a span{font-size:26px}.c{float:left;margin-left:-24px}a:active,a:focus,a:hover{text-decoration:underline}.d{display:flex;padding-top:12px;margin:-12px calc(-1*var(--j)) 48px;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch}.d::after,.d::before{display:block;content:"";padding-right:var(--j)}.e,.f{flex:none;--b:700}.e{display:block;font-size:24px;line-height:18px;letter-spacing:-1px;text-transform:lowercase;border-top:4px solid;padding:6px 4px 0 0}a.e{color:currentColor;text-decoration:none}.f{margin:0 0 0 24px;font-size:6px;line-height:10px;letter-spacing:1px;text-transform:uppercase;width:0}.g{margin-left:auto}.h{flex:none;display:block;margin:10px 24px 0 0;font-size:14px;color:var(--e);--b:600;line-height:18px}.h:last-child{margin-right:0}.i{display:block;cursor:pointer;font-size:16px;min-width:125px;margin:0 auto;color:var(--e);padding:13px;text-decoration:none;border:1px solid var(--e);border-radius:6px;background-color:transparent;outline:0;height:44px;max-height:44px;min-height:44px;line-height:14px;transform:translate(0,0);transition:all;transition-duration:123ms}.i.j{background-color:var(--a);border-color:var(--a);color:#fff;font-weight:700}#isso-thread input[type=button]:hover,#isso-thread input[type=submit]:hover,.i:hover{transform:translate(-2px,-2px);box-shadow:2px 2px 1px var(--h)}#isso-thread input[type=button]:active,#isso-thread input[type=submit]:active,.i:active{transform:translate(0,0);box-shadow:inset 0 0 7px var(--h)}.k>span{position:absolute;border-radius:50%;transform:scale(0);animation:ripple 400ms linear;background-color:rgba(255,255,255,.5)}@media (min-width:768px){:root{--j:64px}}@media (min-width:1024px){:root{--j:128px}}.l:before{content:'\f16d'}.m:before{content:'\f300'}.o:before{content:'\f167'}.n:before{content:'\f30c'}.p:before{content:'\f2c6'}.q:before{content:'\E800'}.r:before{content:'\F186'}:root{--j:max(12px, (100vw - var(--l)) / 2);--l:800px}h1{margin:48px 0 32px;font-size:36px;line-height:48px;letter-spacing:-.8px}.u p,h1,h2{font-weight:700}h2,h3{margin:42px 0 18px;font-size:26px;line-height:34px;letter-spacing:-.3px}h3{font-size:22px;line-height:30px;letter-spacing:-.18px}p{margin:18px 0}.u,.v li{display:flex;flex-direction:row}.u p{margin-right:12px;margin-top:0;margin-bottom:5px;color:var(--c)}p>code{word-break:break-all}blockquote code,em>code{font-style:normal}.v a,h3,strong{font-weight:600}ul.v{margin:24px 0;padding-left:32px;margin-left:calc(-32*min(max(var(--j) - 32px,0px),1px))}.v a{color:var(--e)}.v li{overflow:hidden;position:relative;list-style:none;margin:2px 0 30px;border-radius:8px}.v picture{margin-top:5px;margin-right:20px}.v picture *{border-radius:5px}#isso-thread #isso-root .S,.A .C>div,.w{margin:0}.x{font-size:16px;margin:5px 0}.u p,i{font-size:14px}blockquote{line-height:32px;font-weight:300;font-style:italic;color:var(--d)}table{margin:24px;border-collapse:separate;border-spacing:12px 0}thead th{border-bottom:var(--k) solid;--b:600;text-align:left}code,pre code{background-color:var(--f)}code{font-size:.9em;font-family:monospace;padding:1px 5px;border:1px dotted var(--c);border-radius:4px}pre code{display:block;width:100vw;margin:48px calc(-1*var(--j));padding:18px var(--j);border-width:0;border-radius:0;overflow-x:scroll}video{display:block;max-width:100%;margin:32px auto}iframe{width:calc(var(--m)*1);height:calc(var(--m)*.66);border:1px solid rgba(0,0,0,.1);--m:calc(100vw - 2 * var(--j))}.y{color:#9e9e9e}.z{cursor:pointer}.A{display:flex;flex-wrap:wrap-reverse}.A .B>p{padding-top:0;margin-top:0}.A .C .D{margin-bottom:7px}.A .B{flex:1;margin-right:15px;width:400px}.A .C{padding:17px;background-color:var(--f);border-radius:4px;border-width:1px;border-color:var(--e);border-style:solid;overflow:hidden;max-width:350px}.A .C h2{margin:0 0 10px}.A .C>div div{margin-left:20px}.A .C>div a{display:block;text-decoration:none}.E{box-shadow:7px 10px 15px rgba(10,10,10,.2)}.E .F{height:10px;width:10px;border-radius:50%;border:1px solid #000;position:relative;top:6px;left:6px;background-color:#ff3b47;border-color:#9d252b;display:inline-block;vertical-align:top}.F.G{left:11px;background-color:#ffc100;border-color:#9d802c}.F.H{left:16px;background-color:#00d742;border-color:#049931}.E .I{position:relative;width:100%;height:25px;background-color:#bbb;margin:0 auto;border-top-right-radius:5px;border-top-left-radius:5px}.E .J,.E .K{display:inline-block}.E .J{position:absolute}.E .K{color:#333;width:100%;padding:0;margin:0;text-align:center;font-size:12px;font-weight:700;vertical-align:top;line-height:25px}.E .L{background-color:#000;color:#fff;box-sizing:border-box;width:100%;margin:0 auto;padding:20px;border-bottom-left-radius:5px;border-bottom-right-radius:5px;font-size:16px}.E .M{font-family:monospace!important;padding:0;margin:0}.E .N{color:var(--c);font-weight:700;margin-right:7px}.E .O{background-color:#fff}.E i{color:#666}#isso-thread h4{display:none}#isso-thread input[type=button],#isso-thread input[type=submit]{cursor:pointer;font-size:16px;width:125px;margin:0 auto;color:var(--e);padding:13px;text-decoration:none;border:1px solid #fff;border-radius:6px;background-color:transparent;outline:0;height:44px;max-height:44px;min-height:44px;line-height:14px;transform:translate(0,0);transition:all;transition-duration:123ms}#isso-thread input[type=submit]{background-color:var(--a);border-color:var(--a);color:#fff}#isso-thread input[type=checkbox]{margin-right:6px}#isso-thread>div>div>div>div,.E .O{color:#000}#isso-thread label{color:#fff}#isso-thread h1,#isso-thread h2,#isso-thread h3,#isso-thread h4,#isso-thread h5,#isso-thread h6{margin:0;line-height:1em}#isso-thread h1{font-size:2em}#isso-thread h2{font-size:1.6}#isso-thread h3{font-size:1.2}#isso-thread #isso-root b,#isso-thread #isso-root h1,#isso-thread #isso-root h2,#isso-thread #isso-root h3,#isso-thread #isso-root i,#isso-thread #isso-root p,#isso-thread #isso-root strong,#isso-thread code,#isso-thread section label,.A .C h2{color:var(--e)}#isso-thread input[type=email],#isso-thread input[type=text]{margin-bottom:15px;padding:10px 0 10px 10px;background-color:transparent;border:0;border-bottom:1px solid var(--e);border-radius:0;outline-color:var(--h);color:var(--e);margin-right:10px}#isso-thread .P::placeholder,#isso-thread input[type=email]::placeholder,#isso-thread input[type=text]::placeholder{color:var(--d)}#isso-thread .P::active,#isso-thread .P:focus,#isso-thread input[type=email]:active,#isso-thread input[type=email]:focus,#isso-thread input[type=text]:active,#isso-thread input[type=text]:focus{border-color:var(--a)!important}#isso-thread input[name=website]{display:none}#isso-thread .Q{margin-top:30px}#isso-thread .Q>.R{padding-right:15px}#isso-thread preview{background:0 0;border:0;box-shadow:none}#isso-thread>div:first-of-type>div:first-of-type>div:first-of-type>div:first-of-type{min-height:100px!important;font-size:14px}#isso-thread>div:first-of-type>div:first-of-type>div:first-of-type>div:first-of-type>div:first-of-type{max-height:1.5em}#isso-thread #isso-root .T{color:#fff!important}.U h2{margin-bottom:0;padding-bottom:0}.U p{margin-top:0}.U i{font-size:14px}@media (min-width:768px){a,p>code{word-break:initial}}@media (max-width:484px){.v li{flex-direction:column}.v li img{width:100%}.v{padding:0 15px!important}.v picture{margin-bottom:10px;margin-right:0}.c{margin-left:0;margin-right:8px}}.Y,.Z{color:#a0a1a7;font-style:italic}.-a,.-b,._{color:#a626a4}.-c,.-d,.-e,.-f,.-g{color:#e45649}.-h{color:#0184bb}.-i,.-j,.-k,.-l,.-m{color:#50a14f}.-n,.-o .-p{color:#c18401}.-q,.-r,.-s,.-t,.-u,.-v,.-w,.-x{color:#986801}.-A,.-B,.-C,.-p,.-y,.-z{color:#4078f2}.-D{font-style:italic}.-E{font-weight:700}.-A{text-decoration:underline}@media (prefers-color-scheme:dark){.Y,.Z{color:#5c6370;font-style:italic}.-a,.-b,._{color:#c678dd}.-c,.-d,.-e,.-f,.-g{color:#e06c75}.-h{color:#56b6c2}.-i,.-j,.-k,.-l,.-m{color:#98c379}.-n,.-o .-p{color:#e6c07b}.-q,.-r,.-s,.-t,.-u,.-v,.-w,.-x{color:#d19a66}.-A,.-B,.-C,.-p,.-y,.-z{color:#61aeee}.-D{font-style:italic}.-E{font-weight:700}.-A{text-decoration:underline}}.-F{padding:0 8px;vertical-align:top;cursor:pointer;color:var(--a)}.-F:hover{text-decoration:underline}.-G{position:absolute;opacity:0;color:#fff;font-weight:700;background-color:var(--a);padding:5px 10px;margin-left:10px;border-radius:6px;font-size:14px;transition:123ms}</style><script defer="">document.documentElement.style.setProperty("--k",1/(window.devicePixelRatio||1)+"px");</script></head><body><div class="d"><a href="/" class="e">Blocs<br/>.fr</a><div class="f">Site</div><a href="/" class="h" title="Accéder à Home">Home</a><div class="f g">Cool</div><a href="bitcoin-nostalgia" class="h" title="Accéder à Go BTC">Go BTC</a><a href="/blog" class="h" title="Accéder à Blog">Blog</a><a href="#" class="h" id="theme-switch" title="Changer la couleur du fond"><span class="a q"></span><span class="a r"></span></a></div><div class="u"><p>#debian</p><p>#bitcoind</p><p>#bitcoin-cli</p></div><div class="A"><div class="B"><p>Avoir son propre nœud Lightning Network (LN) permet d&#x27;avoir un grand contrôle sur les transactions au sein du réseau. Lorsque vous voulez effectuer une transaction LN vous avez deux choix :</p><p>- Dépendre d&#x27;un nœud de tiers et dépendre de ses canaux de paiement ;</p><p>- Avoir son nœud et gérer ses propres canaux avec d&#x27;autres nœuds ;</p><p>Il va sans dire que la deuxième solution offre plus de possibilités, alors nous allons voir dans cet article comment mettre en place tout cela.</p><p>Avoir un noeud Lightning Network signifie que vous êtes un relayeur de transactions. Vous rendez service et la bonne nouvelle, c&#x27;est que pour ce service rendu, vous captez des frais sur les transactions circulantes.</p></div><div class="C"><h2>Sommaire</h2><div class="D"><a href="#mat%C3%A9riels-requis">Matériels requis</a></div><div class="D"><a href="#installer-raspian-stretch-lite">Installer Raspian Stretch Lite</a></div><div class="D"><a href="#configurer-le-raspberry-pi">Configurer le Raspberry Pi</a><div><div class=""><a href="#activer-et-configurer-ssh">Activer et configurer SSH</a></div><div class=""><a href="#cr%C3%A9er-un-utilisateur">Créer un utilisateur</a></div></div></div><div class="D"><a href="#pr%C3%A9parer-le-disque-dur">Préparer le disque dur</a><div><div class=""><a href="#formater-optionnel">Formater</a></div><div class=""><a href="#monter-le-disque">Monter le disque</a></div></div></div><div class="D"><a href="#installer-bitcoind-et-bitcoincli">Installer bitcoind et bitcoin-cli</a></div><div class="D"><a href="#d%C3%A9marrer-bitcoind">Démarrer bitcoind</a></div><div class="D"><a href="#installer-lnd-et-lncli">Installer LND et LnCLI</a></div><div class="D"><a href="#d%C3%A9marrer-lnd">Démarrer LND</a></div></div></div><h2 id="mat%C3%A9riels-requis" class="W"><a href="#mat%C3%A9riels-requis" class="c">§</a>Matériels requis</h2><p>Avant tout il va vous falloir du matériel puisqu’un nœud est un serveur qui fourni un service. Ne vous inquiétez pas vous n’aurez pas besoin d’un serveur coûteux, bruyant et consommateur. Vous aurez besoin d’un nano-ordinateur, c’est petit, c’est silencieux et la consommation est basse, voilà la liste :</p><ul><li><strong>Raspberry Pi 3</strong> : <a href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/" target="_blank">ce matériel</a> est peu coûteux et a les capacités optimales pour avoir un nœud LN efficace. Veillez à acquérir un pack contenant le Raspberry Pi, l’alimentation secteur et une carte SSD. Ces éléments sont compris dans le pack officiel ;</li><li><strong>Un disque dur SSD de 500go ou plus</strong> : vous devrez télécharger la blockchain de Bitcoin qui fait plus de 200 giga octects. Je recommande un disque dur SSD (électronique) à préférer au disque dur mécanique qui a une moins bonne tolérance à la panne. J’ai personnellement un disque dur mécanique ;</li><li><strong>Un écran port HDMI</strong> : ce sera nécessaire pour faire les premières configurations ;</li><li><strong>Un clavier USB</strong> : ce sera également nécessaire pour faire les premières configurations ;</li><li><strong>Un câble RJ45</strong> : ce sera pour connecter votre Raspberry Pi à Internet. Il est possible d’avoir une connexion wifi en y connectant une antenne ou un dongle. Cependant je déconseille cette approche pour des raisons de sécurité et également pour éviter les contraintes d’installation de drivers pas toujours disponibles sur les distributions Linux ;</li></ul><h2 id="installer-raspian-stretch-lite" class="W"><a href="#installer-raspian-stretch-lite" class="c">§</a>Installer Raspian Stretch Lite</h2><p><em>Cette étape est optionnelle mais recommandée.</em></p><p>Avant d’entamer la configuration de votre Raspberry installez un nouveau système d’exploitation plus léger que celui installé par défaut : c’est <a href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank">Raspian Stretch Lite</a>.</p><blockquote><p>Stretch Lite est un système d’exploitation dans le but d’optimiser la consommation de ressources sur notre système.</p></blockquote><p>Installez Raspian Stretch Lite sur la carte SD fournie avec le Raspberry Pi. Il vous faudra la formater. Avec Windows le logiciel <a href="https://www.balena.io/etcher/" target="_blank">Etcher</a> est d’une grande aide. Sur <a href="https://computers.tutsplus.com/articles/how-to-flash-an-sd-card-for-raspberry-pi--mac-53600" class="-I" target="_blank">Mac</a> et <a href="https://www.raspberrypi.org/documentation/installation/installing-images/linux.md" class="-I" target="_blank">distributions Linux</a> préférez la ligne de commande.</p><h2 id="configurer-le-raspberry-pi" class="W"><a href="#configurer-le-raspberry-pi" class="c">§</a>Configurer le Raspberry Pi</h2><p>Ici je vais considérer que vous êtes sur Raspian Stretch Lite, mais pas d’inquiétude vous pouvez tout suivre avec le système d’origine, veillez à ouvrir le terminal car nous allons travailler en ligne de commande, rien de mieux pour se familiariser avec l’environnement Linux.</p><p>Les accès par défaut sont les suivants</p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Connexion</p></div><div class="L"><div class="M"><span class="N">raspberry login: </span><span class="-F cliboard-action-selector" data-value="goxabi5yum_0">📋</span><span id="goxabi5yum_0">pi</span><span id="goxabi5yum_0_copy-result" class="-G">C&#x27;est copié !</span></div><div class="M"><span class="N">Password: </span><span class="-F cliboard-action-selector" data-value="goxabi5yum_1">📋</span><span id="goxabi5yum_1">raspberry</span><span id="goxabi5yum_1_copy-result" class="-G">C&#x27;est copié !</span></div></div></div><blockquote><p>Si vous n’êtes pas habitué au terminal Debian, en tapant votre mot de passe rien ne s’affiche, c’est tout à faire normal, ce que vous tapez est quand même pris en compte. C’est une protection au même titre que les étoiles qu’on voit sur les formulaires web.</p></blockquote><h3 id="activer-et-configurer-ssh" class="W"><a href="#activer-et-configurer-ssh" class="c">§</a>Activer et configurer SSH</h3><p>Actuellement vous travaillez avec un écran et un clavier branchés sur votre petit Rapsberry… Et c’est peut-être pas pratique. J’ai une bonne nouvelle, on va pouvoir faire en sorte de gérer votre système sans avoir besoin d’y accéder physiquement. Vous allez le contrôler à distance grâce au protocole SSH !</p><blockquote><p>SSH signifie Secure Shell, c’est un protocole de réseau ingénieux qui permet l’exécution de commandes à distance en bénéficiant de canaux cryptés. Il est possible d’utiliser SSH au sein d’un réseau local mais aussi en passant par Internet par exemple. Sachez que par défaut la configuration du SSH dans Raspian permet l’authentification par login et mot de passe.</p></blockquote><p>Par défaut la connexion SSH est désactivée pour des raisons de sécurité, alors activez le en tapant ce qui suit</p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Ouvrir Rasp config</p></div><div class="L"><div class="M"><span class="N">pi@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gjf6bg1hw7_0">📋</span><span id="gjf6bg1hw7_0">sudo raspi-config</span><span id="gjf6bg1hw7_0_copy-result" class="-G">C&#x27;est copié !</span></div></div></div><p>Un menu graphique peu charmant s’ouvre, sélectionnez <code>Interfacing Options (Configure connections to peripherals)</code> puis <code>ssh (Enable or disable ssh server)</code> ensuite sélectionnez <code>Yes</code>, <code>OK</code> et enfin <code>Finish</code>.</p><p>Revenez sur le terminal et redémarrez le service ssh</p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Redemarrer SSH</p></div><div class="L"><div class="M"><span class="N">pi@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gzrn9qrpyw_0">📋</span><span id="gzrn9qrpyw_0">sudo systemctl restart ssh</span><span id="gzrn9qrpyw_0_copy-result" class="-G">C&#x27;est copié !</span></div></div></div><p>Votre SSH est maintenant activé.</p><p>À la bonheur, vous pouvez dès maintenant vous connecter à votre Raspberry à distance, depuis un autre ordinateur. D’abord récupérez l’adresse IP de votre Raspberry vous en aurez besoin, utilisez la commande <code>ifconfig</code> pour l’afficher. Voilà un extrait de mon <code>ifconfig</code></p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Trouver l&#x27;adresse IP</p></div><div class="L"><div class="M"><span class="N">pi@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gtlmtzx1vk_0">📋</span><span id="gtlmtzx1vk_0">ifconfig</span><span id="gtlmtzx1vk_0_copy-result" class="-G">C&#x27;est copié !</span><div>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</div><div>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inet <span class="O">192.168.1.42</span>  netmask 255.255.255.0  broadcast 192.168.1.255</div><div>&nbsp;&nbsp;&nbsp;&nbsp;inet6 fe80::10e0:8a76:4fe4:c3c2  prefixlen 64  scopeid 0x20</div><div>&nbsp;&nbsp;&nbsp;&nbsp;ether b8:27:eb:6a:3a:d9  txqueuelen 1000  (Ethernet)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;RX packets 169483183  bytes 168117311599 (156.5 GiB)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;RX errors 2  dropped 45841  overruns 0  frame 0</div><div>&nbsp;&nbsp;&nbsp;&nbsp;TX packets 132373249  bytes 17426498366 (16.2 GiB)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</div><div></div><div>lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</div><div>&nbsp;&nbsp;&nbsp;&nbsp;inet 127.0.0.1  netmask 255.0.0.0</div><div>&nbsp;&nbsp;&nbsp;&nbsp;inet6 ::1  prefixlen 128  scopeid 0x10</div><div>&nbsp;&nbsp;&nbsp;&nbsp;loop  txqueuelen 1000  (Local Loopback)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;RX packets 39066126  bytes 154986068081 (144.3 GiB)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;RX errors 0  dropped 0  overruns 0  frame 0</div><div>&nbsp;&nbsp;&nbsp;&nbsp;TX packets 39066126  bytes 154986068081 (144.3 GiB)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</div><div></div><div>wlan0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</div><div>&nbsp;&nbsp;&nbsp;&nbsp;ether b8:27:eb:3f:6f:8c  txqueuelen 1000  (Ethernet)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;RX packets 0  bytes 0 (0.0 B)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;RX errors 0  dropped 0  overruns 0  frame 0</div><div>&nbsp;&nbsp;&nbsp;&nbsp;TX packets 0  bytes 0 (0.0 B)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</div></div></div></div><p>Voyez en surligné mon adresse IP est <code>192.168.1.42</code> — puisque c’est la réponse à tous les mystères de l’univers. Vous la trouverez normalement sur le connecteur <code>eth0</code> et en <code>ipv4</code> qui est le format que j’ai sélectionné et que je vous recommande pour éviter des configurations futures.</p><p>Avec votre ordinateur favori, que ce soit sur MacOS, Windows, Ubuntu, Trisquel ou TempleOS vous pouvez utiliser un outil qui permet de vous connecter à votre Raspberry avec SSH. Le plus simple avec MacOS ou une distribution Linux. Si vous n’avez pas <code>ssh</code> de disponible en commande, veuillez installer <a href="https://www.openssh.com/" target="_blank">OpenSSH</a>. Voilà comment procéder avec votre terminal sachant que mon IP est <code>192.168.1.42</code></p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Connecter à distance avec SSH</p></div><div class="L"><div class="M"><span class="N">monpc@oumonmac:~ $</span><span class="-F cliboard-action-selector" data-value="gqyku1d0oo_0">📋</span><span id="gqyku1d0oo_0">ssh-keygen -t rsa -b 4096</span><span id="gqyku1d0oo_0_copy-result" class="-G">C&#x27;est copié !</span><div>&gt; Generating public/private rsa key pair.</div><div>&gt; Enter a file in which to save the key (/home/you/.ssh/id_rsa): [Press enter] <i>Laissez par défaut</i></div><div>&gt; Enter passphrase (empty for no passphrase): [Type a passphrase] <i>Votre mot de passe</i></div><div>&gt; Enter same passphrase again: [Type passphrase again] <i>Confirmez votre mot de passe</i></div></div><div class="M"><span class="N">monpc@oumonmac:~ $</span><span class="-F cliboard-action-selector" data-value="gqyku1d0oo_1">📋</span><span id="gqyku1d0oo_1">ssh pi@192.168.1.42</span><span id="gqyku1d0oo_1_copy-result" class="-G">C&#x27;est copié !</span><div>pi@192.168.1.42's password: <i>Entrez votre mot de passe </i></div><div>Linux raspberrypi 4.14.71-v7+ #1145 SMP Fri Sep 21 15:38:35 BST 2018 armv7l</div><div></div><div>The programs included with the Debian GNU/Linux system are free software;</div><div>the exact distribution terms for each program are described in the</div><div>individual files in /usr/share/doc/* /copyright.</div><div></div><div>Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</div><div>permitted by applicable law.</div><div>Last login: Tue Mar 19 02:04:32 2019 from 192.168.1.44</div></div><div class="M"><span class="N">pi@raspberrypi:~ &amp;</span><span id="gqyku1d0oo_2"></span><span id="gqyku1d0oo_2_copy-result" class="-G">C&#x27;est copié !</span></div></div></div><p>Cette étape permet d’avoir une clé RSA pour initialiser une communication chiffrée avec votre Raspberry et de connecter ensuite.</p><p>Il existe des solutions avec interface comme <a href="https://www.putty.org/" target="_blank">PuTTY</a> pour Windows. Vous devrez entrer l’adresse IP de votre Raspberry, le login <code>pi</code> et le mot de passe <code>raspberry</code>.</p><h3 id="cr%C3%A9er-un-utilisateur" class="W"><a href="#cr%C3%A9er-un-utilisateur" class="c">§</a>Créer un utilisateur</h3><p>Afin de protéger votre installation du mieux que possible je recommande de créer un utilisateur prévu à cet usage. Nous l’appellerons “bitcoin”.</p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Créer l&#x27;utilisateur bitcoin</p></div><div class="L"><div class="M"><span class="N">pi@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gfcdd7tvh3_0">📋</span><span id="gfcdd7tvh3_0">adduser bitcoin</span><span id="gfcdd7tvh3_0_copy-result" class="-G">C&#x27;est copié !</span><div>Adding user `bitcoin' ...</div><div>Adding new group `bitcoin' (1001) ...</div><div>Adding new user `bitcoin' (1001) with group `bitcoin' ...</div><div>Creating home directory `/home/bitcoin' ...</div><div>Copying files from `/etc/skel' ...</div><div>Enter new UNIX password: <i>Mettez un mot de passe fort</i></div><div>Retype new UNIX password: <i>Confirmez votre mot de passe</i></div><div>passwd: password updated successfully</div><div>Changing the user information for bitcoin</div><div>Enter the new value, or press ENTER for the default</div><div>&nbsp;&nbsp;Full Name []: <i>Vous pouvez laisser tous ces champs vides</i></div><div>&nbsp;&nbsp;Room Number []:</div><div>&nbsp;&nbsp;Work Phone []:</div><div>&nbsp;&nbsp;Home Phone []:</div><div>&nbsp;&nbsp;Other []:</div><div>Is the information correct? [Y/n] Y</div></div><div class="M"><span class="N">pi@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gfcdd7tvh3_1">📋</span><span id="gfcdd7tvh3_1">su bitcoin</span><span id="gfcdd7tvh3_1_copy-result" class="-G">C&#x27;est copié !</span><div>password:</div></div><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gfcdd7tvh3_2">📋</span><span id="gfcdd7tvh3_2"></span><span id="gfcdd7tvh3_2_copy-result" class="-G">C&#x27;est copié !</span></div></div></div><blockquote><p>Vous pouvez désormais vous connecter directement à l’utilisateur “bitcoin” avec SSH en tapant par exemple <code>ssh bitcoin@192.168.1.42</code></p></blockquote><h2 id="pr%C3%A9parer-le-disque-dur" class="W"><a href="#pr%C3%A9parer-le-disque-dur" class="c">§</a>Préparer le disque dur</h2><p>Vous aurez besoin de télécharger l’entièreté de la blockchain Bitcoin qui fait <a href="https://bitinfocharts.com/bitcoin/" class="-I" target="_blank">250go</a> à l’heure où j’écris ces lignes. Cela signifie que la petite carte SD du Raspberry ne peut pas mémoriser tout ça.    On va faire en sorte que toutes les informations relatives à la blockchain résident dans le disque externe.</p><p>Une fois que vous avez branché votre disque dur sur votre Raspberry, vous devriez le retrouver en tapant la commande <code>df -h</code>. Cette commande va vous lister quelque chose qui ressemble à ce qui suit :</p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Trouver le disque dur</p></div><div class="L"><div class="M"><span class="N">pi@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gjp9su5a3g_0">📋</span><span id="gjp9su5a3g_0">df -h</span><span id="gjp9su5a3g_0_copy-result" class="-G">C&#x27;est copié !</span><div>/dev/root        15G  4.2G  9.8G  30%</div><div>devtmpfs        460M     0  460M   0% /dev</div><div>tmpfs           464M     0  464M   0% /dev/shm</div><div>tmpfs           464M  6.2M  458M   2% /run</div><div>tmpfs           5.0M  4.0K  5.0M   1% /run/lock</div><div>tmpfs           464M     0  464M   0% /sys/fs/cgroup</div><div>/dev/mmcblk0p1   44M   22M   22M  51% /boot</div><div><span class="O">/dev/sda        458G  249G  186G  58% /home/bitcoin/.bitcoin</span></div><div>tmpfs            93M     0   93M   0% /run/user/1001</div></div></div></div><p>Vous devrez trouver un élément ayant la même capacité de stockage que votre disque. Mon disque fait 500go et on le trouve sur le chemin <code>/dev/sda</code>. En général on le devine dans la mesure où c’est le seul disque ayant cette capacité. Notez ce nom quelque part, et retenez cette commande <code>df</code> qui est pratique pour gérer ses disques.</p><h3 id="formater-optionnel" class="W"><a href="#formater-optionnel" class="c">§</a>Formater (optionnel)</h3><p>Votre disque dur doit maintenant être vierge (à moins que vous y avez enregistré la blockchain, dans ce cas ignorez cette étape). Tapez la commande <code>fdisk [votre disque]</code> où [votre disque] devient le nom de votre disque, dans mon exemple c’est <code>fdisk /dev/sda</code>.</p><h3 id="monter-le-disque" class="W"><a href="#monter-le-disque" class="c">§</a>Monter le disque</h3><p>Enfin il faut monter le disque sur le dossier de travail de Bitcoin, on va lui préparer sa maison et son nid douillet. Monter un disque signifie que nous allons associer un répertoire à un disque, octroyant une capacité de mémoire certaine à un répertoire. Et pour ce faire connectez vous à l’utilisateur que nous avions précédemment créé <code>su bitcoin</code>, puis tapez <code>mkdir .bitcoin .lnd</code>.</p><p>Il ne vous reste plus qu’à taper <code>mount &lt;votre disque&gt; .bitcoin</code> où votre disque est le chemin trouvé avec <code>df</code>.</p><blockquote><p>mkdir signifie make directory, c’est pour créer un dossier et .bitcoin est le nom du dossier. Par défaut nous travaillerons avec ce dossier pour la blockchain et les portefeuilles. Le ”.” est un moyen de cacher le dossier, cependant en aucun cas cela constitue sécurité suffisante.</p></blockquote><h2 id="installer-bitcoind-et-bitcoincli" class="W"><a href="#installer-bitcoind-et-bitcoincli" class="c">§</a>Installer bitcoind et bitcoin-cli</h2><p><em>Pour cette partie restez connecté à l’utilisateur <code>bitcoin</code> en tapant <code>su bitcoin</code>.</em></p><p><code>bitcoind</code> est le système central de Bitcoin, le “d” à la fin signifie “daemon” qui désigne un service exécuté et maintenu par la machine. <code>bitcoin-cli</code> est une interface de commande qui permet d’interagir avec le service Bitcoin. Les deux s’installent ensemble, ce qui est super !</p><p>D’abord vous devrez chercher les fichiers d’installation de Bitcoin, je vous le donne ici : <a href="https://bitcoin.org/bin/bitcoin-core-0.19.0.1/bitcoin-0.19.0.1-arm-linux-gnueabihf.tar.gz" class="-I" target="_blank">bitcoin-0.19.0.1-arm-linux-gnueabihf.tar.gz</a>. Gardez ce lien vous en aurez besoin.</p><p>Je tiens à souligner que vous pouvez le chercher par vous même en vous rendant <a href="https://bitcoincore.org/en/download/" class="-I" target="_blank">ici</a> et en sélectionnant “ARM Linux 64bits”. Je vous conseille de le faire vous même car les versions sont mises à jour, ci-dessus vous avez la version 0.19.0.1 de Bitcoin Core.</p><p>Suivez les commandes ci-dessous pour installer <code>bitcoind</code></p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Installer bitcoind et bitcoin-cli</p></div><div class="L"><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="grcy4yd6bo_0">📋</span><span id="grcy4yd6bo_0">wget https://bitcoin.org/bin/bitcoin-core-0.19.0.1/bitcoin-0.19.0.1-arm-linux-gnueabihf.tar.gz</span><span id="grcy4yd6bo_0_copy-result" class="-G">C&#x27;est copié !</span></div><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="grcy4yd6bo_1">📋</span><span id="grcy4yd6bo_1">tar -vxf bitcoin-0.19.0.1-arm-linux-gnueabihf.tar.gz</span><span id="grcy4yd6bo_1_copy-result" class="-G">C&#x27;est copié !</span><div><i>Extraire les données de l&#x27;archive</i></div></div><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="grcy4yd6bo_2">📋</span><span id="grcy4yd6bo_2">sudo install -m 0755 -o bitcoin -g bitcoin -t /usr/local/bin bitcoin-0.19.0.1/bin/*</span><span id="grcy4yd6bo_2_copy-result" class="-G">C&#x27;est copié !</span></div><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="grcy4yd6bo_3">📋</span><span id="grcy4yd6bo_3">rm -rf bitcoin-0.19.0.1</span><span id="grcy4yd6bo_3_copy-result" class="-G">C&#x27;est copié !</span></div></div></div><p>Notez qu’on donne les droits uniquement à l’utilisateur <code>bitcoin</code>. Désormais tapez les commandes <code>bitcoind -version</code> et <code>bitcoin-cli -version</code>. Si tout est bien installé vous verrez les versions s’afficher.</p><h2 id="d%C3%A9marrer-bitcoind" class="W"><a href="#d%C3%A9marrer-bitcoind" class="c">§</a>Démarrer bitcoind</h2><p><code>bitcoind</code> est installé, il reste plus qu’à le démarrer pour qu’il puisse télécharger frénétiquement la blockchain en se connectant à des nœuds du réseau; automatiquement.</p><p>D’abord je vous recommande de vérifier si vous avez bien connecté votre disque dur, suivez l’exemple ci-dessous</p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Vérifier le montage du disque</p></div><div class="L"><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gmf74o23rg_0">📋</span><span id="gmf74o23rg_0">lsblk</span><span id="gmf74o23rg_0_copy-result" class="-G">C&#x27;est copié !</span><div>NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</div><div><span class="O">sda           8:0    0 465.8G  0 disk /home/bitcoin/.bitcoin</span></div><div>mmcblk0     179:0    0  14.9G  0 disk</div><div>&nbsp;|-mmcblk0p1 179:1    0  43.8M  0 part /boot</div><div>&nbsp;&nbsp;-mmcblk0p2 179:2    0  14.8G  0 part /</div></div></div></div><p>On peut voir en surligné que <code>/home/bitcoin/.bitcoin</code> est bien connecté au disque ayant 465.8Go d’espace. Si vous n’avez pas cela, revenez sur la partie <a href="#monter-le-disque">Monter le disque</a>.</p><p>Maintenant on peut écrire le fichier de configuration Bitcoin. Tapez <code>nano .bitcoin/bitcoin.conf</code>, cela va vous ouvrir un éditeur directement dans le terminal, ce qui vous permet d’écrire les configurations. Voilà des configurations que je recommande :</p><pre><code>server=1
daemon=1
txindex=1

rpcuser=&lt;Mettez un nom d&#x27;utilisateur&gt;
rpcpassword=&lt;Mettez un mot de passe&gt;

onlynet=ipv4
zmqpubrawblock=tcp://127.0.0.1:28332
zmqpubrawtx=tcp://127.0.0.1:28333

dbcache=50
maxorphantx=10
maxmempool=50
maxconnections=40
maxuploadtarget=1000
</code></pre><p>Pour sauvegarder tapez CTRL + O et CTRL + X pour quitter.</p><p>Et enfin tapez <code>sudo bitcoind</code> qui aura pour effet de lancer le service Bitcoin qui va rapidement commencer à télécharger la blockchain. Pour rappel cette dernière fait près de 200Go donc vous pouvez prendre une pause ici.</p><p>Pour observer l’avancement tapez la commande <code>tail -f .bitcoin/debug.log</code> vous verrez des entrées qui ressemblent à ce qui suit</p><pre><code>2019-04-15T22:54:29Z UpdateTip: new best=00000000000000000024f0048c611086130b387e6634d8e2617c261a0c44b6dd height=571800 version=0x20c00000 log2_work=90.545983 tx=402724776 date=&#x27;2019-04-15T22:54:19Z&#x27; progress=1.000000 cache=14.5MiB(103309txo) warning=&#x27;35 of last 100 blocks have unexpected version&#x27;
</code></pre><p>L’information intéressante ici est particulièrement <code>progress=1.000000</code>. Cette valeur est en réalité la progression de la synchronisation de la blockchain, 1 signifie 100%, si vous avez par exemple <code>progress=0.014</code> alors vous en êtes à 1.4%. Pour quitter le <code>tail</code> tapez CTRL + C.</p><h2 id="installer-lnd-et-lncli" class="W"><a href="#installer-lnd-et-lncli" class="c">§</a>Installer LND et LnCLI</h2><p><em>Pour cette partie restez connecté à l’utilisateur <code>bitcoin</code> en tapant <code>su bitcoin</code>.</em></p><p><code>lnd</code> est le service qui va transformer le RaspberryPi en un nœud Lightning Network. Il va se connecter automatiquement a l’interface de commande du service <code>bitcoind</code>. Tout comme <code>bitcoind</code> LND embarque l’interface de commande <code>lncli</code>.</p><p>La procédure pour installer LND ressemble à l’installation de Bitcoin. La première chose à faire est de télécharger le service en vous rendant sur ce lien <a href="https://github.com/lightningnetwork/lnd/releases" class="-I" target="_blank">github.com/lightningnetwork/lnd/releases</a>. Ici vous trouverez toutes les versions officielles de LND. Récupérez maintenant le lien de la dernière version “linux-armv7”, voici celle que j’ai à l’heure où j’écris cet article <a href="https://github.com/lightningnetwork/lnd/releases/download/v0.8.2-beta/lnd-linux-armv7-v0.8.2-beta.tar.gz" class="-I" target="_blank">lnd-linux-armv7-v0.8.2-beta.tar.gz</a>.</p><p>Notez bien que mon exemple s’applique pour la version que j’ai envoyée : v0.8.2beta.</p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Installer lnd et lncli</p></div><div class="L"><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gonxgi1ha9_0">📋</span><span id="gonxgi1ha9_0">wget https://github.com/lightningnetwork/lnd/releases/download/v0.8.2-beta/lnd-linux-armv7-v0.8.2-beta.tar.gz</span><span id="gonxgi1ha9_0_copy-result" class="-G">C&#x27;est copié !</span></div><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gonxgi1ha9_1">📋</span><span id="gonxgi1ha9_1">tar -vxf lnd-linux-armv7-v0.8.2-beta.tar.gz &lt;i&gt;Extraire les données de l&#x27;archive&lt;/i&gt;</span><span id="gonxgi1ha9_1_copy-result" class="-G">C&#x27;est copié !</span></div><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gonxgi1ha9_2">📋</span><span id="gonxgi1ha9_2">sudo install -m 0755 -o bitcoin -g bitcoin -t /user/local/bin lnd-linux-armv7-v0.8.2-beta/*</span><span id="gonxgi1ha9_2_copy-result" class="-G">C&#x27;est copié !</span></div><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gonxgi1ha9_3">📋</span><span id="gonxgi1ha9_3">rm -rf lnd-linux-armv7-v0.8.2-beta</span><span id="gonxgi1ha9_3_copy-result" class="-G">C&#x27;est copié !</span></div></div></div><p>Désormais tapez la commande <code>lnd -version</code>. Si tout est bien installé vous verrez la version s’afficher.</p><p>Avant de démarrer LND créez son fichier de configuration en tapant <code>nano .lnd/lnd.conf</code>. Trouvez ci-dessous une configuration que je propose, vous pouvez évidemment mettre ce que vous voulez pour certaines options.</p><pre><code>[Application Options]
debuglevel=info
maxpendingchannels=3
alias=&lt;Votre Alias / pseudonyme / nom / ...&gt;
color=&lt;Une couleur en hexadécimal, par exemple #F00 pour Rouge vif&gt;

nat=true # Si vous vous connectez depuis une box Internet

[Bitcoin]
bitcoin.active=1

bitcoin.mainnet=1
bitcoin.node=bitcoind

[bitcoind]
bitcoind.rpcuser=&lt;Ce que vous aviez mis dans .bitcoin/bitcoin.conf rpcuser=&gt;
bitcoind.rpcpass=&lt;Ce que vous aviez mis dans .bitcoin/bitcoin.conf rpcpassword=&gt;
bitcoind.zmqpubrawblock=tcp://127.0.0.1:28332
bitcoind.zmqpubrawtx=tcp://127.0.0.1:28333

[autopilot]
autopilot.active=1
autopilot.maxchannels=3
autopilot.allocation=0.5
</code></pre><blockquote><p>“autopilot” vous intrigue peut-être. C’est un algorithme qui connecte automatiquement des nœuds présents dans le réseau décentralisé, typiquement des nœuds Bitcoin et Lightning Network. Autopilot intègre le modèle <a href="https://en.wikipedia.org/wiki/Barab%C3%A1si%E2%80%93Albert_model" class="-I" target="_blank">Barabási–Albert</a> dans l’idée de produire un réseau pair-à-pair en théorie homogène. Personnellement je l’active mais en aucun cas cela est nécessaire.</p></blockquote><h2 id="d%C3%A9marrer-lnd" class="W"><a href="#d%C3%A9marrer-lnd" class="c">§</a>Démarrer LND</h2><p>Tapez simplement <code>lnd</code> et voilà ! Votre nœud LN est en route. Il va d’abord synchroniser sa blockchain locale avec bitcoind. En attendant vous allez créer votre portefeuille. En effet LND ne va pas exploiter le portefeuille de bitcoind mais gérer le sien, cela veut dire que vous aurez un portefeuille relatif à votre nœud LN.</p><p>Laissez <code>lnd</code> tourner, ne quittez pas en faisant CTRL + C, je vous suggère d’ouvrir un nouveau terminal et vous connecter à nouveau sur <code>bitcoin</code>. Quitter votre terminal ne stoppera pas LND.</p><p>Une fois de retour suivez cette procédure ci-dessous :</p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Créer un portefeuille avec lncli</p></div><div class="L"><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="g5ze59lr7s_0">📋</span><span id="g5ze59lr7s_0">lncli create</span><span id="g5ze59lr7s_0_copy-result" class="-G">C&#x27;est copié !</span><div>Input wallet password : <i>Mettez un mot de passe fort et écrivez le sur une feuille pour ne pas le perdre</i></div><div>Confirm wallet password: <i>Confirmez votre mot de passe</i></div><div></div><div>Do you have an existing cipher seed mnemonic you want to user? (Enter y/n): n</div><div></div><div>Your cipher seed can optionally be encrypted.</div><div>Input your passphrase if you wish to encrypt it (or press enter to proceed without a cipher seed passphrase): <i>Mettez un mot de passe ou pressez directement ENTREE</i></div><div></div><div>Generating fresh cipher seed...</div><div></div><div>!!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!!</div><div></div><div><i>Ici lncli affiche votre seed, notez la consciencieusement sur une feuille, dans l'ordre. Cette seed (graine) est la clé de votre portefeuille; elle vous assurera de ne jamais perdre vos fonds</i></div><div></div><div>!!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!!</div><div></div><div>lnd successfully initialized!</div></div></div></div><p>TADAM ! Vous avez maintenant un tout nouveau portefeuille et LND sera capable de fonctionner… Après avoir tapé ces commandes</p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Générer une adresse</p></div><div class="L"><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gftkpyfohu_0">📋</span><span id="gftkpyfohu_0">lncli unlock</span><span id="gftkpyfohu_0_copy-result" class="-G">C&#x27;est copié !</span></div><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gftkpyfohu_1">📋</span><span id="gftkpyfohu_1">lncli newaddress p2wkh</span><span id="gftkpyfohu_1_copy-result" class="-G">C&#x27;est copié !</span></div></div></div><blockquote><p>“lncli unlock” est important pour que LND puisse fonctionner car il aura besoin d’un accès à votre portefeuille, ce dernier est chiffré par défaut et il faut le déchiffrer en le déverrouillant. Le mot de passe à insérer est le premier mot de passe que vous avez mis lors de la création du portefeuille avec <code>lncli create</code></p></blockquote><p>LND est maintenant prêt à fonctionner. Pour observer ce qu’il se passe tapez la commande <code>tail -f .lnd/debug.log</code>.</p><p>Pour vérifier que votre nœud est bien recensé sur les internets allez chercher votre clé publique en tapant <code>lncli getinfo</code> comme dans le terminal ci-dessous</p><div class="E"><div class="I"><div class="J"><div class="F -H"></div><div class="F G"></div><div class="F H"></div></div><p class="K">Trouver les informations du nœud</p></div><div class="L"><div class="M"><span class="N">bitcoin@raspberrypi:~ $</span><span class="-F cliboard-action-selector" data-value="gao7r160pu_0">📋</span><span id="gao7r160pu_0">lncli getinfo</span><span id="gao7r160pu_0_copy-result" class="-G">C&#x27;est copié !</span><div>{</div><div>&amp;nbsp;&quot;identity_pubkey&quot;: &quot;<span class="O">03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9</span>&quot;,</div><div>&nbsp;"alias": "Blocs",</div><div>&nbsp;"num_pending_channels": 0,</div><div>&nbsp;"num_active_channels": 3,</div><div>&nbsp;"num_peers": 4,</div><div>&nbsp;"block_height": 572660,</div><div>&nbsp;"block_hash": "0000000000000000001d7bf15a13ffb76a8c1256e5ab778ffcc918d97944e45a",</div><div>&nbsp;"synced_to_chain": true,</div><div>&nbsp;"testnet": false,</div><div>&nbsp;"chains": [</div><div>&nbsp;&nbsp;"bitcoin"</div><div>&nbsp;],</div><div>&nbsp;"uris": [</div><div>&nbsp;&nbsp;"03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9@109.18.104.32:9735"</div><div>&nbsp;],</div><div>&nbsp;"best_header_timestamp": "1555878831",</div><div>&nbsp;"version": "0.5.2-beta commit=v0.5.2-beta",</div><div>&nbsp;"num_inactive_channels": 0</div><div>}</div></div></div></div><p>Ma clé publique est <code>03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9</code>, elle sert d’identifiant au nœud. Maintenant si votre nœud est bien configuré et en route, vous pouvez le trouver sur ce site : <a href="https://1ml.com" class="-I" target="_blank">1ml.com</a> en tapant dans la recherche la clé publique de votre nœud.</p><hr/><p>Vous êtes maintenant propriétaire d’un nœud Bitcoin et d’un nœud Lightning Network. Cela signifie que vous avez la capacité d’utiliser n’importe quel portefeuille supportant LN en passant par votre propre serveur. Félicitations et bienvenue dans la communauté de l’a… Bitcoin et LN. Dans un article suivant on va voir comment avoir une interface graphique pour gérer son nœud sans passer par les lignes de commande comme nous l’avons fait tout au long de l’installation. Pour l’heure vous pouvez découvrir les possibilités de LN en tapant <code>lncli --help</code> et les possibilités de Bitcoin en tapant <code>bitcoin-cli --help</code>.</p><span class="y">Modifié le  <time dateTime="2019-12-31T00:00:00.000Z">mardi 31 décembre 2019</time></span><section class="X"><p><i>Cet article est sous license <a href="https://creativecommons.org/licenses/?lang=fr-FR" target="_blank">Creative Commons BY-NC-SA</a>. Il est ouvert à contribution en vous rendant sur ce lien : <a href="https://github.com/Chaine-de-Blocs/blocs.fr/blob/master/posts/2019-12-31-installer-un-noeud-lightning-network.mdx" target="_blank">Installer un nœud Lightning Network</a></i></p></section><script type="text/javascript" data-isso="https://isso.blocs.fr/" src="//isso.blocs.fr/js/embed.min.js" data-isso-css="true" data-isso-lang="fr" data-isso-reply-notifications="true" async=""></script><div class="U"><h2>Commentaires</h2><p><i>(Le format <a href="https://www.christopheducamp.com/2014/09/18/love-markdown/" target="_blank">Markdown</a> est accepté)</i></p><section id="isso-thread"></section></div></body></html>