const apiURL="https://rest.coinapi.io";function getBTCCurrentPrice(){return fetch("https://blockchain.info/tobtc?currency=EUR&value=1",{method:"GET"}).then((e=>e.text())).then((e=>1/e))}function getPrice(e){e.setDate(e.getDate()-1);const t=e.getFullYear();let n=e.getMonth()+1,r=e.getDate();n<=9&&(n="0"+n),r<=9&&(r="0"+r);return fetch(apiURL+`/v1/exchangerate/BTC/EUR?time=${t}${n}${r}`,{method:"GET",headers:{"X-CoinAPI-Key":"33FB9E6F-E14B-49DE-8B2C-17CDCA3E5DAA",Accept:"application/json"}}).then((e=>e.json())).then((e=>{if(e.error)throw e.error;return e.rate}))}!async function(){const e=document.querySelector("#year-picker");for(let t=2011;t<=(new Date).getFullYear();t++){const n=document.createElement("option");n.text=t,n.value=t,e.add(n)}e.options[e.options.length-1].selected=!0;const t=document.querySelector("#pl-result"),n=document.querySelector("#wanna-cry"),r=document.getElementsByName("euros-invested")[0];e.addEventListener("change",(()=>{o()})),r.addEventListener("change",(()=>{o()}));const c=document.querySelector("#error-display"),o=()=>{c.style.visibility="hidden",t.textContent="ðŸ¤”"};try{const o=await getBTCCurrentPrice();n.addEventListener("click",(async n=>{try{const n=new Date;n.setFullYear(+e.value);const c=await getPrice(n),a=(+r.value/c*o).toFixed(2);var i=new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",currencyDisplay:"code"});t.textContent=i.format(a)}catch(e){c.style.visibility="visible"}}))}catch(e){c.style.visibility="visible"}}();